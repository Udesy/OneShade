import Link from "next/link";
import React, { useRef, useEffect } from "react";
import gsap from "gsap";
import { ScrollTrigger } from "gsap/ScrollTrigger";

gsap.registerPlugin(ScrollTrigger);

const Logo = ({ className, footer, ...props }) => {
  const letterRefs = useRef([]);
  const svgRef = useRef(null);

  const letterPaths = [
    // O
    "M73.9827 322C49.9974 322 31.6707 315.143 19.0024 301.428C6.33413 287.713 0 268.333 0 243.289V78.7111C0 53.6667 6.33413 34.287 19.0024 20.5722C31.6707 6.85741 49.9974 0 73.9827 0C97.9679 0 116.295 6.85741 128.963 20.5722C141.631 34.287 147.965 53.6667 147.965 78.7111V243.289C147.965 268.333 141.631 287.713 128.963 301.428C116.295 315.143 97.9679 322 73.9827 322ZM73.9827 277.278C90.8737 277.278 99.3192 266.97 99.3192 246.356V75.5167C99.3192 54.987 90.8737 44.7222 73.9827 44.7222C57.1761 44.7222 48.7728 54.987 48.7728 75.5167V246.356C48.7728 266.97 57.1761 277.278 73.9827 277.278Z",
    // N
    "M180.776 317.528V4.47222H242.091L289.47 191.794H290.357V4.47222H333.809V317.528H283.642L225.242 88.9333H224.355V317.528H180.776Z",
    // E
    "M370.167 317.528V4.47222H503.183V49.1944H418.94V131.867H485.955V176.589H418.94V272.806H503.183V317.528H370.167Z",
    // S
    "M595.408 322C571.761 322 553.899 315.228 541.822 301.683C529.66 288.054 523.579 268.589 523.579 243.289V225.4H569.692V246.867C569.692 267.141 578.137 277.278 595.028 277.278C603.305 277.278 609.555 274.807 613.777 269.867C618.085 265.011 620.238 257.046 620.238 245.972C620.238 232.854 617.282 221.311 611.37 211.344C605.459 201.293 594.522 189.281 578.56 175.311C558.459 157.422 544.44 141.237 536.501 126.756C528.478 112.359 524.466 96.0463 524.466 77.8167C524.466 53.0278 530.674 33.8611 543.089 20.3167C555.503 6.77222 573.535 0 597.182 0C620.576 0 638.227 6.77222 650.135 20.3167C662.128 33.8611 668.124 53.3259 668.124 78.7111V91.6167H622.012V75.5167C622.012 64.7833 619.943 56.9889 615.804 52.1333C611.666 47.1926 605.628 44.7222 597.689 44.7222C581.389 44.7222 573.239 54.6889 573.239 74.6222C573.239 85.9518 576.279 96.5574 582.36 106.439C588.441 116.235 599.462 128.161 615.424 142.217C635.778 160.106 649.798 176.333 657.483 190.9C665.168 205.552 669.011 222.717 669.011 242.394C669.011 268.035 662.719 287.713 650.135 301.428C637.636 315.143 619.394 322 595.408 322Z",
    // H
    "M697.008 317.528V4.47222H745.781V131.867H798.101V4.47222H846.874V317.528H798.101V176.589H745.781V317.528H697.008Z",
    // A
    "M870.31 317.528L920.856 4.47222H986.984L1037.53 317.528H988.758L979.89 255.3V256.194H924.403L915.536 317.528H870.31ZM930.231 213.772H974.063L952.4 59.0333H951.513L930.231 213.772Z",
    // D
    "M1060.97 317.528V4.47222H1135.46C1159.7 4.47222 1177.9 11.0315 1190.06 24.15C1202.13 37.2685 1208.17 56.4778 1208.17 81.7778V240.222C1208.17 265.522 1202.13 284.731 1190.06 297.85C1177.9 310.969 1159.7 317.528 1135.46 317.528H1060.97ZM1109.74 272.806H1134.57C1142.59 272.806 1148.72 270.42 1152.94 265.65C1157.25 260.88 1159.4 253.128 1159.4 242.394V79.6056C1159.4 68.8722 1157.25 61.1204 1152.94 56.35C1148.72 51.5796 1142.59 49.1944 1134.57 49.1944H1109.74V272.806Z",
    // E
    "M1240.98 317.528V4.47222H1374V49.1944H1289.76V131.867H1356.64V176.589H1289.76V272.806H1374V317.528H1240.98Z",
  ];

  useEffect(() => {
    if (footer && letterRefs.current.length && svgRef.current) {
      // Set initial state for all letters
      gsap.set(letterRefs.current, { opacity: 0.1, y: 150 });

      gsap.to(letterRefs.current, {
        opacity: 1,
        y: 0,
        duration: 1,
        stagger: 0.16,
        ease: "power2.inOut",
        delay: 0.2,
        scrollTrigger: {
          trigger: svgRef.current,
          start: "top 80%",
          once: true,
        },
      });
    }
  }, [footer]);

  return footer ? (
    <Link href="/" className={className} {...props}>
      <svg
        ref={svgRef}
        className={className}
        width="100%"
        height="100%"
        viewBox="0 0 1374 322"
        fill="none"
        xmlns="http://www.w3.org/2000/svg"
      >
        {letterPaths.map((pathData, index) => (
          <path
            key={index}
            ref={(el) => (letterRefs.current[index] = el)}
            d={pathData}
            fill="#959595"
          />
        ))}
      </svg>
    </Link>
  ) : (
    <Link href="/" className={className} {...props}>
      <svg
        width="100%"
        height="100%"
        viewBox="0 0 3395 890"
        fill="none"
        xmlns="http://www.w3.org/2000/svg"
      >
        <path
          d="M383.508 316.399C408.931 309.145 411.458 238.826 389.15 159.339C366.844 79.851 328.15 21.2941 302.727 28.5481C277.302 35.8021 274.777 106.12 297.083 185.608C319.391 265.094 358.085 323.652 383.508 316.399Z"
          fill="currentColor"
        />
        <path
          d="M540.723 188.081C564.582 109.052 563.431 38.6979 538.155 30.9399C512.877 23.1818 473.046 80.9577 449.188 159.986C425.332 239.015 426.48 309.37 451.759 317.128C477.035 324.885 516.867 267.11 540.723 188.081Z"
          fill="currentColor"
        />
        <path
          d="M325.61 353.059C343.108 333.096 307.526 272.566 246.139 217.86C184.751 163.154 120.802 134.989 103.304 154.951C85.8069 174.914 121.388 235.444 182.776 290.15C244.165 344.856 308.114 373.022 325.61 353.059Z"
          fill="currentColor"
        />
        <path
          d="M653.059 294.865C715.495 241.38 752.244 181.562 735.135 161.259C718.029 140.955 653.545 167.855 591.109 221.339C528.672 274.824 491.925 334.642 509.032 354.946C526.139 375.249 590.622 348.35 653.059 294.865Z"
          fill="currentColor"
        />
        <path
          d="M296.538 415.787C300.557 389.456 238.172 357.921 157.201 345.355C76.2266 332.788 7.3262 343.948 3.30686 370.279C-0.712486 396.611 61.6712 428.142 142.645 440.709C223.618 453.277 292.518 442.117 296.538 415.787Z"
          fill="currentColor"
        />
        <path
          d="M690.203 445.979C771.406 435.024 834.393 404.739 830.889 378.331C827.387 351.925 758.718 339.4 677.513 350.352C596.312 361.307 533.323 391.594 536.827 418C540.331 444.406 608.998 456.932 690.203 445.979Z"
          fill="currentColor"
        />
        <path
          d="M189.428 588.915C264.285 555.341 316.261 508.393 305.521 484.05C294.785 459.708 225.398 467.192 150.541 500.766C75.6853 534.339 23.7079 581.288 34.446 605.63C45.1842 629.973 114.572 622.489 189.428 588.915Z"
          fill="currentColor"
        />
        <path
          d="M794.957 613.179C806.169 589.056 755.12 541.081 680.936 506.025C606.751 470.969 537.524 462.109 526.312 486.232C515.1 510.357 566.149 558.33 640.333 593.386C714.516 628.441 783.745 637.304 794.957 613.179Z"
          fill="currentColor"
        />
        <path
          d="M308.456 687.989C353.423 618.935 371.973 551.1 349.888 536.48C327.8 521.857 273.441 565.98 228.476 635.034C183.507 704.087 164.958 771.918 187.043 786.543C209.13 801.166 263.486 757.042 308.456 687.989Z"
          fill="currentColor"
        />
        <path
          d="M638.911 791.175C661.279 776.995 644.061 708.804 600.453 638.871C556.843 568.938 503.358 523.742 480.99 537.922C458.624 552.102 475.843 620.293 519.45 690.226C563.058 760.159 616.545 805.357 638.911 791.175Z"
          fill="currentColor"
        />
        <path
          d="M461.684 706.749C462.485 624.145 441.717 556.97 415.296 556.71C388.876 556.449 366.808 623.203 366.007 705.805C365.206 788.412 385.976 855.588 412.394 855.847C438.817 856.108 460.885 789.356 461.684 706.749Z"
          fill="currentColor"
        />
        <path
          d="M1241.86 710.965C1202.67 710.965 1172.73 699.857 1152.03 677.642C1131.34 655.426 1120.99 624.035 1120.99 583.467V316.881C1120.99 276.314 1131.34 244.922 1152.03 222.707C1172.73 200.491 1202.67 189.384 1241.86 189.384C1281.05 189.384 1310.99 200.491 1331.69 222.707C1352.39 244.922 1362.74 276.314 1362.74 316.881V583.467C1362.74 624.035 1352.39 655.426 1331.69 677.642C1310.99 699.857 1281.05 710.965 1241.86 710.965ZM1241.86 638.523C1269.46 638.523 1283.26 621.827 1283.26 588.435V311.707C1283.26 278.453 1269.46 261.826 1241.86 261.826C1214.4 261.826 1200.67 278.453 1200.67 311.707V588.435C1200.67 621.827 1214.4 638.523 1241.86 638.523ZM1416.34 703.721V196.628H1516.52L1593.93 500.056H1595.38V196.628H1666.37V703.721H1584.41L1488.99 333.44H1487.54V703.721H1416.34ZM1725.77 703.721V196.628H1943.1V269.07H1805.46V402.984H1914.95V475.426H1805.46V631.279H1943.1V703.721H1725.77ZM2093.78 710.965C2055.14 710.965 2025.96 699.995 2006.23 678.056C1986.36 655.978 1976.42 624.449 1976.42 583.467V554.491H2051.76V589.263C2051.76 622.103 2065.56 638.523 2093.16 638.523C2106.68 638.523 2116.89 634.522 2123.79 626.519C2130.83 618.653 2134.34 605.752 2134.34 587.814C2134.34 566.564 2129.51 547.867 2119.86 531.723C2110.2 515.441 2092.33 495.985 2066.25 473.356C2033.41 444.379 2010.5 418.162 1997.53 394.705C1984.42 371.385 1977.87 344.961 1977.87 315.433C1977.87 275.279 1988.01 244.233 2008.3 222.293C2028.58 200.353 2058.04 189.384 2096.67 189.384C2134.9 189.384 2163.74 200.353 2183.19 222.293C2202.78 244.233 2212.58 275.762 2212.58 316.881V337.786H2137.24V311.707C2137.24 294.321 2133.86 281.695 2127.1 273.83C2120.34 265.827 2110.47 261.826 2097.5 261.826C2070.87 261.826 2057.56 277.97 2057.56 310.258C2057.56 328.61 2062.52 345.789 2072.46 361.795C2082.39 377.664 2100.4 396.981 2126.48 419.749C2159.73 448.726 2182.64 475.012 2195.2 498.607C2207.75 522.34 2214.03 550.144 2214.03 582.019C2214.03 623.552 2203.75 655.426 2183.19 677.642C2162.77 699.857 2132.96 710.965 2093.78 710.965ZM2259.77 703.721V196.628H2339.46V402.984H2424.94V196.628H2504.63V703.721H2424.94V475.426H2339.46V703.721H2259.77ZM2542.92 703.721L2625.5 196.628H2733.54L2816.13 703.721H2736.44L2721.95 602.923V604.372H2631.3L2616.81 703.721H2542.92ZM2640.82 535.656H2712.43L2677.04 285.007H2675.59L2640.82 535.656ZM2854.42 703.721V196.628H2976.12C3015.72 196.628 3045.46 207.253 3065.33 228.502C3085.06 249.752 3094.92 280.867 3094.92 321.849V578.5C3094.92 619.481 3085.06 650.597 3065.33 671.846C3045.46 693.096 3015.72 703.721 2976.12 703.721H2854.42ZM2934.1 631.279H2974.67C2987.78 631.279 2997.78 627.415 3004.68 619.688C3011.72 611.961 3015.24 599.405 3015.24 582.019V318.33C3015.24 300.944 3011.72 288.388 3004.68 280.66C2997.78 272.933 2987.78 269.07 2974.67 269.07H2934.1V631.279ZM3148.53 703.721V196.628H3365.86V269.07H3228.22V402.984H3337.5V475.426H3228.22V631.279H3365.86V703.721H3148.53Z"
          fill="currentColor"
        />
      </svg>
    </Link>
  );
};

export default Logo;
